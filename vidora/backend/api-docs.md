# Vidora TV API Documentation\n\n## Base URL\n```\nhttp://localhost:5000/api\n```\n\n## Authentication\nMost endpoints require a JWT token in the Authorization header:\n```\nAuthorization: Bearer <access_token>\n```\n\n## Endpoints\n\n### Authentication\n\n#### Register User\n```http\nPOST /auth/register\nContent-Type: application/json\n\n{\n  \"fullName\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\",\n  \"phone\": \"1234567890\"\n}\n```\n\n#### Verify Email\n```http\nGET /auth/verify-email?token=<verification_token>\n```\n\n#### Login\n```http\nPOST /auth/login\nContent-Type: application/json\n\n{\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}\n```\n\n#### Refresh Token\n```http\nPOST /auth/refresh\nContent-Type: application/json\n\n{\n  \"refreshToken\": \"<refresh_token>\"\n}\n```\n\n#### Request Password Reset\n```http\nPOST /auth/request-password-reset\nContent-Type: application/json\n\n{\n  \"email\": \"john@example.com\"\n}\n```\n\n#### Reset Password\n```http\nPOST /auth/reset-password\nContent-Type: application/json\n\n{\n  \"token\": \"<reset_token>\",\n  \"password\": \"newpassword123\"\n}\n```\n\n### User Management\n\n#### Get Profile\n```http\nGET /users/me\nAuthorization: Bearer <access_token>\n```\n\n#### Update Profile\n```http\nPATCH /users/me\nAuthorization: Bearer <access_token>\nContent-Type: application/json\n\n{\n  \"fullName\": \"John Smith\",\n  \"phone\": \"0987654321\"\n}\n```\n\n#### Delete Account (GDPR)\n```http\nDELETE /users/me\nAuthorization: Bearer <access_token>\n```\n\n#### Export Data (GDPR)\n```http\nGET /users/me/export\nAuthorization: Bearer <access_token>\n```\n\n### TV Plans\n\n#### Get All Plans\n```http\nGET /plans\n```\n\n#### Get Specific Plan\n```http\nGET /plans/:id\n```\n\n### Subscriptions\n\n#### Create Subscription\n```http\nPOST /subscriptions\nAuthorization: Bearer <access_token>\nContent-Type: application/json\n\n{\n  \"planId\": \"<plan_uuid>\"\n}\n```\n\n#### Get User Subscriptions\n```http\nGET /subscriptions\nAuthorization: Bearer <access_token>\n```\n\n#### Cancel Subscription\n```http\nPOST /subscriptions/:id/cancel\nAuthorization: Bearer <access_token>\n```\n\n### Admin Routes\n\n#### Create Plan (Admin Only)\n```http\nPOST /admin/plans\nAuthorization: Bearer <admin_access_token>\nContent-Type: application/json\n\n{\n  \"title\": \"Premium Plan\",\n  \"description\": \"Premium channels with sports\",\n  \"price\": 49.99,\n  \"billingCycle\": \"monthly\",\n  \"channelCount\": 150\n}\n```\n\n#### Update Plan (Admin Only)\n```http\nPATCH /admin/plans/:id\nAuthorization: Bearer <admin_access_token>\nContent-Type: application/json\n\n{\n  \"title\": \"Updated Premium Plan\",\n  \"price\": 54.99,\n  \"isActive\": true\n}\n```\n\n### Webhooks\n\n#### Stripe Webhook\n```http\nPOST /webhooks/stripe\nContent-Type: application/json\nStripe-Signature: <stripe_signature>\n\n<stripe_event_payload>\n```\n\n## Response Formats\n\n### Success Response\n```json\n{\n  \"id\": \"uuid\",\n  \"data\": {...},\n  \"message\": \"Success message\"\n}\n```\n\n### Error Response\n```json\n{\n  \"error\": \"Error message\",\n  \"details\": \"Additional error details\"\n}\n```\n\n## Status Codes\n- `200` - Success\n- `201` - Created\n- `400` - Bad Request\n- `401` - Unauthorized\n- `403` - Forbidden\n- `404` - Not Found\n- `500` - Internal Server Error\n\n## Rate Limiting\n- 100 requests per 15 minutes per IP address\n- Rate limit headers included in responses\n\n## CORS\n- Configured for frontend URL: `http://localhost:5173`\n- Credentials supported for authentication